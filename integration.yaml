# app env config
env_variable:
  inject: true
  env_file: "extensions/.env"

# app configuration
app:
  name: "xcore-services-extension"
  env: "production"
  debug: false

extensions:
  webhook:
    enabled: true
    service: "extensions.services.service:WebhookService"
    env:
      secret: "${WEBHOOK_SECRET}"
    config:
      timeout: 10
      retries: 3
      retry_delay: 2
      secret_header: "X-Signature-256"
      secret: "${WEBHOOK_SECRET}"
  
  health:
    enabled: true
    service: "extensions.services.service:HealthService"
    background: true
    background_mode: "async"
    background_restart: true
    config:
      interval: 10
      alert_on_failure: true
      checks:
        - name: "database"
          type: "database"
          target: "default"
        - name: "redis"
          type: "redis"
          url: "redis://localhost:6379"
        - name: "api_externe"
          type: "http"
          url: "https://api.example.com/ping"
          expected_status: 200

databases:
  default:
    type: "sqlite"
    url: "${DATABASE_URL}"
    pool_size: 20
    max_overflow: 40
    echo: false

  cache:
    type: "redis"
    url: "${REDIS_URL}"
    max_connections: 50

scheduler:
  enabled: true
  backend: "redis"
  timezone: "Europe/Paris"
  jobs:
    - id: sandbox_runtimer
      func: "backgroundtask.sandbox:service_main"
      trigger: "interval"
      seconds: 30
      enabled: true

logging:
  level: "WARNING"
  format: "%(asctime)s [%(levelname)s] %(name)s: %(message)s"
  handlers:
    console:
      enabled: true
      level: "WARNING"
    file:
      enabled: true
      path: "logs/app.log"
      max_bytes: 52428800
      backup_count: 10
