name: erp_auth
version: 1.0.0
author: vous
description: >
  Module d'authentification centralisé pour tout l'ERP.
  Gère les JWT (access + refresh tokens), les sessions,
  les rôles et les permissions.
  Tous les autres modules ERP utilisent ce plugin pour protéger leurs routes.

execution_mode: trusted
framework_version: ">=1.0"
entry_point: src/main.py

requires:
  - erp_core # besoin des Users et de la DB

allowed_imports:
  - __future__
  - datetime
  - hmac
  - hashlib
  - json
  - base64
  - typing
  - functools
  - logging
  - fastapi
  - fastapi.security
  - pydantic
  - sqlalchemy
  - sqlalchemy.orm
  - models
  - schemas
  - services
  - router
  - secrets

envconfiguration:
  envfile: ".env"
  inject: "true"

resources:
  timeout_seconds: 10
  max_memory_mb: 0
  rate_limit:
    calls: 500
    period_seconds: 60

runtime:
  log_level: INFO
  health_check:
    enabled: false
  retry:
    max_attempts: 1

filesystem:
  allowed_paths: ["*"]
  denied_paths: []

env:
  AUTH_JWT_SECRET: "${AUTH_JWT_SECRET}"
